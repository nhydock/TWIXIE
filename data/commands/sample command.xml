<!--
    Here is an example of an obscenely convoluted Command. First, the Command
    creates a new Item, with an in-line definition. This new Item also has a
    Command, which also creates a new Item in-line. The final Item again has a
    Command, which adds a new path to a Room. Please, if you can, describe all
    of your Rooms, Items, and Commands in separate files, and link them via
    their names instead.
-->
    
<Command name="Inspect Walls"
	message="The walls are damp, and made of stone. The years
        have smoothed their once-rough edges. Some bricks
        in the far wall seem a tad loose...">
        
    <Produce>
        <Item name="Loose Bricks"
			description="Some bricks that appear to have been
                loosened from the wall, probably by a
                previous inmate...">

            <Possess>false</Possess>

            <AttachTo>Dungeon Cell</AttachTo>

            <Command 
				name="Move Loose Bricks"
				message="You move aside the loose bricks to reveal...

                    A key!">
                <!--
                    Does not require Loose Bricks, as the player can't have
                    Loose Bricks; instead, the player must simply be in the same
                    Room as the Loose Bricks.
                -->

                <Consume>
					<Item name="Loose Bricks"/>
				</Consume>
				
                <Produce>
                    <Item name="Rusty Key"
						description="A rusty key, it appears to have been
                            hand-crafted...">

                        <Possess>true</Possess>

                        <AttachTo>Dungeon Cell</AttachTo>

                        <Command name="Unlock cell door"
							message="The door is now unlocked. You can now leave
                                the cell!">

                            <Location>Dungeon Cell</Location>

                            <Require>
								<Item name="Rusty Key"/>
							</Require>
                            
                            <Consume>
								<Item name="Rusty Key"/>
                            </Consume>

                            <AlterRoom name="Dungeon Cell">
                                <Create>
									<Path name="To hallway" destination="Hallway"/>
                                </Create>
                            </AlterRoom>
                        </Command>
                    </Item>
                </ProduceItem>
            </Command>
        </Item>
    </ProduceItem>
</Command>
