<!--
    Here is an example of an obscenely convoluted Command. First, the Command
    creates a new Item, with an in-line definition. This new Item also has a
    Command, which also creates a new Item in-line. The final Item again has a
    Command, which adds a new path to a Room. Please, if you can, describe all
    of your Rooms, Items, and Commands in separate files, and link them via
    their names instead.
-->
    
<Command name="Inspect Walls">
	<Message>
		The walls are damp, and made of stone. The years
        have smoothed their once-rough edges. Some bricks
        in the far wall seem a tad loose...
    </Message>
        
    <Alter>
		<Room>
			<Create>
				<Item name="Loose Bricks">
					<Description>Some bricks that appear to have been
						loosened from the wall, probably by a
						previous inmate...</Description>
		   
					<Possess>false</Possess>
				</Item>
				
				<Command name="Move Loose Bricks">
					<Description>
						You move aside the loose bricks to reveal...

						A key!
					</Description>
					<!--
						Does not require Loose Bricks, as the player can't have
						Loose Bricks; instead, the player must simply be in the same
						Room as the Loose Bricks.
					-->

					<Alter>
						<Room>
							<Remove>
								<Item name="Loose Bricks"/>
							</Remove>
							
							<Create>
								<Item name="Rusty Key">
									<Description>
										A rusty key, it appears to have been
											hand-crafted..."
									</Description>

									<Possess>true</Possess>

									<Command name="Unlock cell door">
										<Message>
											The door is now unlocked. You can now leave
											the cell!
										</Message>

										<Location>Dungeon Cell</Location>

										<Alter>
											<Player>
												<Remove>
													<Item name="Rusty Key"/>
												</Remove>
											</Player>
											
											<Room>
												<Create>
													<Path name="Hallway"/>
												</Create>
											</Room>
										</Alter>
									</Command>
								</Item>
							</Create>
						</Room>
					</Alter>
				</Command>
			</Create>
		</Room>
    </Alter>
</Command>
